<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartGuide - IoT Dashboard</title>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/components.css">
  <link rel="stylesheet" href="css/dashboard.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
</head>
<body>

  <!-- Main Dashboard -->
  <div id="dashboardScreen" class="dashboard-screen">
    <!-- Emergency Alert Banner -->
    <div id="emergencyAlert" class="emergency-alert hidden">
      <div class="emergency-content">
        <i class="fas fa-exclamation-triangle"></i>
        <div class="emergency-text">
          <strong>⚠️ EMERGENCY ALERT!</strong>
          <p id="emergencyMessage">Device needs immediate assistance</p>
        </div>
        <button class="emergency-close" onclick="closeEmergencyAlert()">×</button>
      </div>
    </div>

    <!-- Header -->
    <header class="dashboard-header">
      <div class="header-left">
        <button class="sidebar-toggle" onclick="toggleSidebar()">
          <i class="fas fa-bars"></i>
        </button>
        <h2 class="dashboard-title">
          <i class="fas fa-chart-line"></i> Dashboard
        </h2>
      </div>

      <div class="header-right">
        <button id="emergencyBtn" class="emergency-button" onclick="triggerEmergency()">
          <i class="fas fa-exclamation-circle"></i> Emergency
        </button>
        <button id="darkModeToggle" class="dark-mode-btn" title="Toggle Dark Mode">
          <i class="fas fa-moon"></i>
        </button>
        <div class="user-menu">
          <img src="assets/profile.jpg" alt="User" class="user-avatar">
          <div class="dropdown-menu">
            <div class="user-info">
              <h3 id="userName">Admin User</h3>
              <p id="userEmail">admin@smartguide.com</p>
            </div>
            <hr>
            <a href="#" onclick="openSettings()"><i class="fas fa-cog"></i> Settings</a>
            <a href="#" onclick="openProfile()"><i class="fas fa-user"></i> Profile</a>
            <hr>
            <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Logout</a>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="dashboard-wrapper">
      <main class="main-content">
        <!-- Quick Status Cards -->
        <section class="stats-section">
          <h3 class="section-title">
            <i class="fas fa-tachometer-alt"></i> Quick Status
          </h3>
          <div class="stats-grid">
            <!-- Device Status -->
            <a href="device-status.html" class="stat-card device-status card-link">
              <div class="stat-icon">
                <i class="fas fa-microchip"></i>
              </div>
              <div class="stat-content">
                <h4>Device Status</h4>
                <p class="stat-value" id="deviceStatus">Online</p>
                <span class="stat-label">Signal: <strong id="signal">98%</strong></span>
              </div>
              <div class="stat-indicator online"></div>
            </a>

    
            <!-- Emergency Status -->
            <a href="emergency-status.html" class="stat-card emergency-status card-link">
              <div class="stat-icon">
                <i class="fas fa-alert-circle"></i>
              </div>
              <div class="stat-content">
                <h4>Emergency Status</h4>
                <p class="stat-value" id="emergencyStatus">No Alert</p>
                <span class="stat-label">Last: <strong id="lastAlert">N/A</strong></span>
              </div>
              <div class="stat-indicator safe"></div>
            </a>

            <!-- User Information -->
            <a href="active-user.html" class="stat-card user-info-card card-link">
              <div class="stat-icon">
                <i class="fas fa-user-circle"></i>
              </div>
              <div class="stat-content">
                <h4>Active User</h4>
                <p class="stat-value" id="activeUser">User-001</p>
                <span class="stat-label">ID: <strong>SG-2024-001</strong></span>
              </div>
            </a>
          </div>
        </section>

        <!-- Maps and Location Section -->
        <section class="map-section">
          <div class="section-header">
            <h3 class="section-title">
              <i class="fas fa-map-location-dot"></i> Live Location Tracking
            </h3>
            <div class="map-controls">
              <button class="map-btn" onclick="zoomMap(1)"><i class="fas fa-plus"></i></button>
              <button class="map-btn" onclick="zoomMap(-1)"><i class="fas fa-minus"></i></button>
              <button class="map-btn" onclick="centerMap()"><i class="fas fa-location-dot"></i></button>
            </div>
          </div>
          <div id="map" class="modern-map"></div>
          <div class="location-info">
            <div class="info-item">
              <span>Latitude:</span>
              <strong id="latitude">13.6929°</strong>
            </div>
            <div class="info-item">
              <span>Longitude:</span>
              <strong id="longitude">-89.2182°</strong>
            </div>
            <div class="info-item">
              <span>Accuracy:</span>
              <strong id="accuracy">±5m</strong>
            </div>
            <div class="info-item">
              <span>Last Update:</span>
              <strong id="lastUpdate">Just now</strong>
            </div>
          </div>
        </section>

        <!-- Activity Log Section -->
        <section class="activity-section">
          <div class="section-header">
            <h3 class="section-title">
              <i class="fas fa-history"></i> Activity Log
            </h3>
            <button class="refresh-btn" onclick="refreshActivityLog()">
              <i class="fas fa-sync-alt"></i> Refresh
            </button>
          </div>
          <div class="activity-log" id="activityLog">
            <div class="log-entry">
              <div class="log-icon">
                <i class="fas fa-power-off"></i>
              </div>
              <div class="log-content">
                <p><strong>Device Online</strong></p>
                <span class="log-time">Today, 09:30 AM</span>
              </div>
            </div>
            <div class="log-entry">
              <div class="log-icon">
                <i class="fas fa-battery-three-quarters"></i>
              </div>
              <div class="log-content">
                <p><strong>Battery Low</strong></p>
                <span class="log-time">Today, 08:15 AM</span>
              </div>
            </div>
            <div class="log-entry">
              <div class="log-icon">
                <i class="fas fa-map-pin"></i>
              </div>
              <div class="log-content">
                <p><strong>Location Updated</strong></p>
                <span class="log-time">Today, 07:45 AM</span>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Settings</h2>
        <button class="modal-close" onclick="closeModal('settingsModal')">×</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h4>Notifications</h4>
          <label class="toggle-switch">
            <input type="checkbox" checked>
            <span>Emergency Alerts</span>
          </label>
          <label class="toggle-switch">
            <input type="checkbox" checked>
            <span>Battery Alerts</span>
          </label>
          <label class="toggle-switch">
            <input type="checkbox">
            <span>Location Updates</span>
          </label>
        </div>
        <div class="settings-section">
          <h4>Device Update Frequency</h4>
          <select class="form-control">
            <option>Every 5 seconds</option>
            <option selected>Every 10 seconds</option>
            <option>Every 30 seconds</option>
            <option>Every 1 minute</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script src="js/darkmode.js"></script>
  <script src="js/map.js"></script>
  <script src="js/dashboard.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/emergency.js"></script>
</body>
</html>
